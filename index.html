<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSE Brookasil - Sistema Eleitoral Nacional 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --space-blue: #0a192f;
            --deep-blue: #112240;
            --electric-blue: #00b4d8;
            --cyber-green: #00ff9d;
            --platinum: #e6e8e6;
            --silver: #a8a9ad;
            --carbon: #1a1a1a;
            --neon-purple: #9d4edd;
            --warning-red: #ff0055;
            --gold: #ffb300;
            --grid-color: rgba(0, 180, 216, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: 
                radial-gradient(circle at 20% 20%, rgba(0, 180, 216, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 255, 157, 0.05) 0%, transparent 50%),
                linear-gradient(135deg, var(--space-blue) 0%, var(--deep-blue) 100%);
            min-height: 100vh;
            color: var(--platinum);
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px) 0 0 / 50px 50px,
                linear-gradient(0deg, var(--grid-color) 1px, transparent 1px) 0 0 / 50px 50px;
            pointer-events: none;
            opacity: 0.3;
            z-index: 0;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Header Futurista */
        header {
            background: rgba(17, 34, 64, 0.9);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 24px;
            padding: 25px 35px;
            margin-bottom: 35px;
            border: 1px solid rgba(0, 180, 216, 0.2);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 80px rgba(0, 180, 216, 0.1),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--electric-blue), 
                var(--cyber-green), 
                transparent);
            animation: scanline 4s linear infinite;
        }

        @keyframes scanline {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .logo {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, var(--electric-blue), var(--cyber-green));
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--space-blue);
            font-size: 42px;
            box-shadow: 
                0 10px 30px rgba(0, 180, 216, 0.4),
                inset 0 0 0 2px rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .logo::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(255, 255, 255, 0.1) 50%,
                transparent 70%
            );
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .titulo-sistema h1 {
            background: linear-gradient(90deg, var(--electric-blue), var(--cyber-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 32px;
            font-weight: 800;
            letter-spacing: -0.5px;
            margin-bottom: 8px;
        }

        .titulo-sistema p {
            color: var(--silver);
            font-size: 16px;
            font-weight: 300;
        }

        .usuario-info {
            background: rgba(26, 26, 26, 0.8);
            padding: 18px 25px;
            border-radius: 18px;
            text-align: right;
            border: 1px solid rgba(0, 180, 216, 0.2);
            position: relative;
            overflow: hidden;
        }

        .usuario-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--electric-blue), var(--cyber-green));
        }

        .usuario-nome {
            font-weight: 700;
            background: linear-gradient(90deg, var(--electric-blue), var(--cyber-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 20px;
        }

        .usuario-cargo {
            color: var(--silver);
            font-size: 14px;
            margin-top: 4px;
        }

        /* Abas Holográficas */
        .abas-container {
            display: flex;
            background: rgba(17, 34, 64, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.5),
                inset 0 0 0 1px rgba(0, 180, 216, 0.1);
            border: 1px solid rgba(0, 180, 216, 0.2);
            margin-bottom: 35px;
        }

        .abas-lateral {
            width: 280px;
            background: linear-gradient(180deg, 
                rgba(10, 25, 47, 0.95) 0%,
                rgba(17, 34, 64, 0.95) 100%);
            padding: 35px 0;
            position: relative;
        }

        .abas-lateral::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, 
                transparent, 
                var(--electric-blue), 
                var(--cyber-green), 
                transparent);
            opacity: 0.5;
        }

        .aba-item {
            padding: 22px 35px;
            color: var(--silver);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 18px;
            font-size: 16px;
            font-weight: 500;
            position: relative;
            border-left: 4px solid transparent;
            margin: 5px 0;
        }

        .aba-item:hover {
            background: rgba(0, 180, 216, 0.1);
            color: var(--electric-blue);
            padding-left: 40px;
        }

        .aba-item:hover::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--electric-blue);
            animation: pulse 2s infinite;
        }

        .aba-item.ativo {
            background: linear-gradient(90deg, 
                rgba(0, 180, 216, 0.2) 0%,
                rgba(0, 180, 216, 0.1) 100%);
            color: var(--cyber-green);
            border-left-color: var(--cyber-green);
            font-weight: 700;
            text-shadow: 0 0 20px rgba(0, 255, 157, 0.3);
        }

        .aba-item i {
            width: 24px;
            text-align: center;
            font-size: 20px;
            transition: transform 0.3s ease;
        }

        .aba-item:hover i {
            transform: scale(1.2);
        }

        .conteudo-abas {
            flex: 1;
            padding: 45px;
            min-height: 700px;
        }

        .aba-conteudo {
            display: none;
            animation: hologramIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .aba-conteudo.ativo {
            display: block;
        }

        @keyframes hologramIn {
            from { 
                opacity: 0; 
                transform: translateY(20px) perspective(1000px) rotateX(5deg);
                filter: blur(10px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) perspective(1000px) rotateX(0);
                filter: blur(0);
            }
        }

        /* Cards Dashboard Neon */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 45px;
        }

        .card {
            background: rgba(17, 34, 64, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 30px;
            border: 1px solid rgba(0, 180, 216, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                var(--electric-blue), 
                var(--cyber-green));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: rgba(0, 180, 216, 0.4);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                0 0 100px rgba(0, 180, 216, 0.1),
                inset 0 0 0 1px rgba(0, 180, 216, 0.3);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-titulo {
            color: var(--silver);
            font-size: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-valor {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(90deg, var(--electric-blue), var(--cyber-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            line-height: 1;
            text-shadow: 0 0 30px rgba(0, 180, 216, 0.3);
        }

        .card-detalhe {
            color: var(--silver);
            font-size: 14px;
            font-weight: 300;
        }

        /* Filtros Futuristas */
        .filtros-container {
            background: rgba(17, 34, 64, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 35px;
            border: 1px solid rgba(0, 180, 216, 0.2);
            margin-bottom: 35px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .filtros-titulo {
            background: linear-gradient(90deg, var(--electric-blue), var(--cyber-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .filtros-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 25px;
        }

        .filtro-group {
            display: flex;
            flex-direction: column;
        }

        .filtro-label {
            color: var(--silver);
            font-size: 14px;
            margin-bottom: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .filtro-select, .form-select, .form-input {
            padding: 16px 20px;
            border-radius: 12px;
            border: 1px solid rgba(0, 180, 216, 0.3);
            background: rgba(10, 25, 47, 0.8);
            color: var(--platinum);
            font-size: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 400;
        }

        .filtro-select:focus, .form-select:focus, .form-input:focus {
            outline: none;
            border-color: var(--cyber-green);
            box-shadow: 
                0 0 0 3px rgba(0, 255, 157, 0.1),
                0 0 30px rgba(0, 255, 157, 0.2);
            background: rgba(10, 25, 47, 0.9);
        }

        .filtro-select option, .form-select option {
            background: var(--deep-blue);
            color: var(--platinum);
            padding: 12px;
        }

        /* Tabela Holográfica */
        .tabela-container {
            background: rgba(17, 34, 64, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid rgba(0, 180, 216, 0.2);
            margin-bottom: 35px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .tabela-header {
            padding: 25px 35px;
            background: linear-gradient(90deg, 
                rgba(0, 180, 216, 0.2) 0%,
                rgba(0, 255, 157, 0.2) 100%);
            border-bottom: 1px solid rgba(0, 180, 216, 0.3);
            position: relative;
            overflow: hidden;
        }

        .tabela-header h3 {
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--platinum);
        }

        .tabela-content {
            overflow-x: auto;
            max-height: 600px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
        }

        thead {
            background: rgba(10, 25, 47, 0.9);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        th {
            padding: 22px 20px;
            text-align: left;
            color: var(--electric-blue);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 14px;
            border-bottom: 2px solid rgba(0, 180, 216, 0.3);
            white-space: nowrap;
        }

        td {
            padding: 22px 20px;
            border-bottom: 1px solid rgba(0, 180, 216, 0.1);
            color: var(--platinum);
            font-weight: 400;
        }

        tbody tr {
            transition: all 0.3s ease;
            position: relative;
        }

        tbody tr::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, var(--electric-blue), var(--cyber-green));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        tbody tr:hover {
            background: rgba(0, 180, 216, 0.05);
        }

        tbody tr:hover::before {
            opacity: 1;
        }

        tbody tr:hover td {
            color: var(--electric-blue);
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            display: inline-block;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .status-analise { 
            background: linear-gradient(90deg, var(--gold), #ff9800);
            color: var(--space-blue);
            box-shadow: 0 0 20px rgba(255, 179, 0, 0.3);
        }
        
        .status-aprovado { 
            background: linear-gradient(90deg, var(--cyber-green), #00cc88);
            color: var(--space-blue);
            box-shadow: 0 0 20px rgba(0, 255, 157, 0.3);
        }
        
        .status-recusado { 
            background: linear-gradient(90deg, var(--warning-red), #ff3366);
            color: white;
            box-shadow: 0 0 20px rgba(255, 0, 85, 0.3);
        }

        /* Botões Futuristas */
        .btn {
            padding: 18px 35px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transition: left 0.6s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primario {
            background: linear-gradient(135deg, var(--electric-blue), var(--neon-purple));
            color: white;
            box-shadow: 
                0 15px 35px rgba(0, 180, 216, 0.4),
                inset 0 0 0 1px rgba(255, 255, 255, 0.2);
        }

        .btn-primario:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 
                0 25px 50px rgba(0, 180, 216, 0.6),
                0 0 100px rgba(0, 180, 216, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.3);
        }

        .btn-secundario {
            background: transparent;
            color: var(--electric-blue);
            border: 2px solid var(--electric-blue);
        }

        .btn-secundario:hover {
            background: rgba(0, 180, 216, 0.1);
            transform: translateY(-5px);
            box-shadow: 
                0 15px 35px rgba(0, 180, 216, 0.3),
                inset 0 0 0 1px rgba(0, 180, 216, 0.3);
        }

        .btn-terciario {
            background: linear-gradient(135deg, var(--cyber-green), #00cc88);
            color: var(--space-blue);
            box-shadow: 
                0 15px 35px rgba(0, 255, 157, 0.4),
                inset 0 0 0 1px rgba(255, 255, 255, 0.2);
        }

        .btn-terciario:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 
                0 25px 50px rgba(0, 255, 157, 0.6),
                0 0 100px rgba(0, 255, 157, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.3);
        }

        .btn-pequeno {
            padding: 10px 20px;
            font-size: 14px;
        }

        /* Modais Futuristas */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.4s ease;
        }

        .modal.ativo {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(145deg, 
                rgba(17, 34, 64, 0.95) 0%,
                rgba(10, 25, 47, 0.95) 100%);
            border-radius: 30px;
            width: 90%;
            max-width: 600px;
            overflow: hidden;
            border: 1px solid rgba(0, 180, 216, 0.3);
            box-shadow: 
                0 30px 80px rgba(0, 0, 0, 0.6),
                0 0 200px rgba(0, 180, 216, 0.2),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            animation: modalSlideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideUp {
            from { 
                opacity: 0; 
                transform: translateY(60px) perspective(1000px) rotateX(10deg);
                filter: blur(20px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) perspective(1000px) rotateX(0);
                filter: blur(0);
            }
        }

        .modal-header {
            padding: 30px;
            background: linear-gradient(90deg, 
                rgba(0, 180, 216, 0.2) 0%,
                rgba(0, 255, 157, 0.2) 100%);
            border-bottom: 1px solid rgba(0, 180, 216, 0.3);
        }

        .modal-header h3 {
            font-size: 26px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(90deg, var(--electric-blue), var(--cyber-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-body {
            padding: 35px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 25px 35px;
            background: rgba(10, 25, 47, 0.8);
            border-top: 1px solid rgba(0, 180, 216, 0.2);
            display: flex;
            justify-content: flex-end;
            gap: 20px;
        }

        /* Responsividade */
        @media (max-width: 1200px) {
            .abas-lateral {
                width: 240px;
            }
            
            .dashboard-cards {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 992px) {
            .abas-container {
                flex-direction: column;
            }
            
            .abas-lateral {
                width: 100%;
                display: flex;
                overflow-x: auto;
                padding: 0;
            }
            
            .aba-item {
                padding: 20px 25px;
                white-space: nowrap;
                border-left: none;
                border-bottom: 4px solid transparent;
                min-width: 200px;
            }
            
            .aba-item.ativo {
                border-left: none;
                border-bottom-color: var(--cyber-green);
            }
            
            .conteudo-abas {
                padding: 30px;
            }
        }

        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .filtros-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                text-align: center;
                gap: 25px;
                padding: 25px;
            }
            
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            body {
                padding: 10px;
            }
            
            .conteudo-abas {
                padding: 20px;
            }
            
            .modal-content {
                width: 95%;
            }
            
            .form-botoes {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-botoes .btn {
                width: 100%;
            }
        }

        /* Utilitários */
        .hidden {
            display: none !important;
        }

        .texto-centro {
            text-align: center;
        }

        .texto-direita {
            text-align: right;
        }

        .mb-20 { margin-bottom: 20px; }
        .mb-30 { margin-bottom: 30px; }
        .mb-40 { margin-bottom: 40px; }
        .mt-20 { margin-top: 20px; }
        .mt-30 { margin-top: 30px; }
        .mt-40 { margin-top: 40px; }

        .mensagem {
            padding: 20px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 1px solid;
            backdrop-filter: blur(10px);
        }

        .mensagem-sucesso {
            background: rgba(0, 255, 157, 0.1);
            border-color: rgba(0, 255, 157, 0.3);
            color: var(--cyber-green);
            box-shadow: 0 10px 30px rgba(0, 255, 157, 0.1);
        }

        .mensagem-erro {
            background: rgba(255, 0, 85, 0.1);
            border-color: rgba(255, 0, 85, 0.3);
            color: #ff6680;
            box-shadow: 0 10px 30px rgba(255, 0, 85, 0.1);
        }

        .mensagem-aviso {
            background: rgba(255, 179, 0, 0.1);
            border-color: rgba(255, 179, 0, 0.3);
            color: var(--gold);
            box-shadow: 0 10px 30px rgba(255, 179, 0, 0.1);
        }

        /* Loading Skeleton */
        .skeleton {
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0.05) 25%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0.05) 75%
            );
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Tooltip Futurista */
        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip-text {
            visibility: hidden;
            width: 280px;
            background: linear-gradient(145deg, 
                rgba(17, 34, 64, 0.95) 0%,
                rgba(10, 25, 47, 0.95) 100%);
            color: var(--platinum);
            text-align: left;
            border-radius: 12px;
            padding: 15px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: all 0.3s ease;
            font-size: 13px;
            font-weight: 300;
            border: 1px solid rgba(0, 180, 216, 0.3);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 80px rgba(0, 180, 216, 0.1);
            backdrop-filter: blur(20px);
        }

        .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: rgba(0, 180, 216, 0.3) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        /* Scrollbar Personalizada */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(10, 25, 47, 0.5);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--electric-blue), var(--cyber-green));
            border-radius: 10px;
            border: 2px solid rgba(10, 25, 47, 0.5);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--cyber-green), var(--electric-blue));
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo-container">
                <div class="logo">
                    <i class="fas fa-vote-yea"></i>
                </div>
                <div class="titulo-sistema">
                    <h1>TSE BROOKASIL 2026</h1>
                    <p>Sistema Eleitoral Nacional - Painel de Controle</p>
                </div>
            </div>
            <div class="usuario-info">
                <div class="usuario-nome" id="usuarioNome">SISTEMA PRINCIPAL</div>
                <div class="usuario-cargo" id="usuarioCargo">Aguardando Autenticação</div>
            </div>
        </header>

        <!-- Abas -->
        <div class="abas-container">
            <div class="abas-lateral">
                <div class="aba-item ativo" data-aba="dashboard">
                    <i class="fas fa-chart-network"></i>
                    <span>Painel Central</span>
                </div>
                <div class="aba-item" data-aba="candidatura">
                    <i class="fas fa-user-astronaut"></i>
                    <span>Registrar Candidatura</span>
                </div>
                <div class="aba-item" data-aba="analise">
                    <i class="fas fa-clipboard-list-check"></i>
                    <span>Análise de Candidaturas</span>
                </div>
                <div class="aba-item" data-aba="login">
                    <i class="fas fa-terminal"></i>
                    <span>Acesso TSE/TRE</span>
                </div>
                <div class="aba-item" data-aba="gerenciamento">
                    <i class="fas fa-cogs"></i>
                    <span>Controle Central</span>
                </div>
            </div>
            
            <div class="conteudo-abas">
                <!-- Dashboard -->
                <div class="aba-conteudo ativo" id="dashboard">
                    <h2 class="filtros-titulo mb-30">
                        <i class="fas fa-chart-network"></i>
                        Painel de Monitoramento Eleitoral
                    </h2>
                    
                    <!-- Cards de Estatísticas -->
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-titulo">
                                <i class="fas fa-users"></i>
                                CANDIDATOS REGISTRADOS
                            </div>
                            <div class="card-valor" id="totalCandidatos">0</div>
                            <div class="card-detalhe">Total no Sistema</div>
                        </div>
                        
                        <div class="card">
                            <div class="card-titulo">
                                <i class="fas fa-shield-check"></i>
                                APROVADOS
                            </div>
                            <div class="card-valor" id="totalAprovados">0</div>
                            <div class="card-detalhe">Candidaturas Validadas</div>
                        </div>
                        
                        <div class="card">
                            <div class="card-titulo">
                                <i class="fas fa-hourglass-half"></i>
                                EM ANÁLISE
                            </div>
                            <div class="card-valor" id="totalAnalise">0</div>
                            <div class="card-detalhe">Aguardando Aprovação</div>
                        </div>
                        
                        <div class="card">
                            <div class="card-titulo">
                                <i class="fas fa-ban"></i>
                                RECUSADOS
                            </div>
                            <div class="card-valor" id="totalRecusados">0</div>
                            <div class="card-detalhe">Candidaturas Invalidadas</div>
                        </div>
                    </div>
                    
                    <!-- Filtros -->
                    <div class="filtros-container">
                        <h3 class="filtros-titulo">
                            <i class="fas fa-filter"></i>
                            Filtros de Visualização
                        </h3>
                        <div class="filtros-grid">
                            <div class="filtro-group">
                                <label class="filtro-label">Estado</label>
                                <select class="filtro-select" id="filtroEstado">
                                    <option value="">Todos os Estados</option>
                                    <!-- Estados serão preenchidos via JS -->
                                </select>
                            </div>
                            
                            <div class="filtro-group">
                                <label class="filtro-label">Cidade</label>
                                <select class="filtro-select" id="filtroCidade">
                                    <option value="">Todas as Cidades</option>
                                    <!-- Cidades serão preenchidas via JS -->
                                </select>
                            </div>
                            
                            <div class="filtro-group">
                                <label class="filtro-label">Cargo</label>
                                <select class="filtro-select" id="filtroCargo">
                                    <option value="">Todos os Cargos</option>
                                    <!-- Cargos serão preenchidos via JS -->
                                </select>
                            </div>
                            
                            <div class="filtro-group">
                                <label class="filtro-label">Partido</label>
                                <select class="filtro-select" id="filtroPartido">
                                    <option value="">Todos os Partidos</option>
                                    <!-- Partidos serão preenchidos via JS -->
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabela de Candidatos -->
                    <div class="tabela-container">
                        <div class="tabela-header">
                            <h3><i class="fas fa-list"></i> Registros de Candidatura</h3>
                        </div>
                        <div class="tabela-content">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Candidato</th>
                                        <th>Cargo</th>
                                        <th>Partido</th>
                                        <th>Estado/Cidade</th>
                                        <th>Número</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="tabelaCandidatos">
                                    <!-- Dados serão preenchidos via JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Registrar Candidatura -->
                <div class="aba-conteudo" id="candidatura">
                    <div class="filtros-container">
                        <h2 class="filtros-titulo mb-30">
                            <i class="fas fa-user-astronaut"></i>
                            Registro de Nova Candidatura
                        </h2>
                        <p class="card-detalhe mb-40">
                            Sistema de registro automatizado de candidaturas. Preencha todas as etapas para submeter uma nova candidatura.
                        </p>
                        
                        <!-- Etapas -->
                        <div class="form-grid mb-40">
                            <div class="etapa ativo" data-etapa="1">
                                <div class="etapa-numero">01</div>
                                <div class="etapa-nome">Dados Pessoais</div>
                            </div>
                            <div class="etapa" data-etapa="2">
                                <div class="etapa-numero">02</div>
                                <div class="etapa-nome">Partido e Número</div>
                            </div>
                            <div class="etapa" data-etapa="3">
                                <div class="etapa-numero">03</div>
                                <div class="etapa-nome">Vice/Suplente</div>
                            </div>
                            <div class="etapa" data-etapa="4">
                                <div class="etapa-numero">04</div>
                                <div class="etapa-nome">Confirmação</div>
                            </div>
                        </div>
                        
                        <!-- Formulário Etapa 1 -->
                        <div class="form-etapa-conteudo" id="etapa1">
                            <h3 class="mb-30">Dados do Candidato</h3>
                            <div class="form-grid">
                                <div class="filtro-group">
                                    <label class="filtro-label">
                                        <i class="fas fa-id-card"></i>
                                        Nome Completo
                                    </label>
                                    <div class="form-grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                                        <input type="text" class="form-input" id="candidatoNome" placeholder="Nome">
                                        <input type="text" class="form-input" id="candidatoSobrenome" placeholder="Sobrenome">
                                    </div>
                                </div>
                                
                                <div class="filtro-group">
                                    <label class="filtro-label">
                                        <i class="fab fa-tiktok"></i>
                                        Perfil TikTok
                                    </label>
                                    <input type="text" class="form-input" id="candidatoTiktok" placeholder="@usuario">
                                    <div class="card-detalhe mt-10">Incluir @ no início</div>
                                </div>
                                
                                <div class="filtro-group">
                                    <label class="filtro-label">
                                        <i class="fas fa-compass"></i>
                                        Posicionamento Ideológico
                                    </label>
                                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                        <button type="button" class="btn btn-secundario btn-pequeno ideologia-btn" data-ideologia="direita">
                                            <i class="fas fa-arrow-right"></i> Direita
                                        </button>
                                        <button type="button" class="btn btn-secundario btn-pequeno ideologia-btn" data-ideologia="centro">
                                            <i class="fas fa-circle"></i> Centro
                                        </button>
                                        <button type="button" class="btn btn-secundario btn-pequeno ideologia-btn" data-ideologia="esquerda">
                                            <i class="fas fa-arrow-left"></i> Esquerda
                                        </button>
                                    </div>
                                    <select class="form-select hidden" id="candidatoIdeologia">
                                        <option value="">Selecione uma ideologia</option>
                                        <option value="direita">Direita</option>
                                        <option value="centro">Centro</option>
                                        <option value="esquerda">Esquerda</option>
                                    </select>
                                </div>
                                
                                <div class="filtro-group">
                                    <label class="filtro-label">
                                        <i class="fas fa-briefcase"></i>
                                        Cargo Pretendido
                                    </label>
                                    <select class="form-select" id="candidatoCargo">
                                        <option value="">Selecione um cargo</option>
                                        <!-- Cargos serão preenchidos via JS -->
                                    </select>
                                </div>
                                
                                <div class="filtro-group">
                                    <label class="filtro-label">
                                        <i class="fas fa-map-marked-alt"></i>
                                        Local de Candidatura
                                    </label>
                                    <div class="form-grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                                        <select class="form-select" id="candidatoEstado">
                                            <option value="">Estado</option>
                                            <!-- Estados serão preenchidos via JS -->
                                        </select>
                                        <select class="form-select" id="candidatoCidade" disabled>
                                            <option value="">Cidade</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-botoes mt-40">
                                <button class="btn btn-secundario" disabled>
                                    <i class="fas fa-arrow-left"></i>
                                    Voltar
                                </button>
                                <button class="btn btn-primario" id="btnEtapa1">
                                    Continuar
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Formulário Etapa 2 -->
                        <div class="form-etapa-conteudo hidden" id="etapa2">
                            <h3 class="mb-30">Filiação Partidária</h3>
                            <div class="form-grid">
                                <div class="filtro-group">
                                    <label class="filtro-label">
                                        <i class="fas fa-landmark"></i>
                                        Partido Político
                                    </label>
                                    <select class="form-select" id="candidatoPartido" disabled>
                                        <option value="">Selecione um partido</option>
                                    </select>
                                    <div class="card-detalhe mt-10">Partidos filtrados pela ideologia selecionada</div>
                                </div>
                                
                                <div class="filtro-group">
                                    <label class="filtro-label">
                                        <i class="fas fa-hashtag"></i>
                                        Número de Candidatura
                                    </label>
                                    <input type="text" class="form-input" id="candidatoNumero" placeholder="Gerado automaticamente" disabled>
                                    <div class="card-detalhe mt-10" id="ajudaNumero">O número será gerado após selecionar o partido</div>
                                </div>
                            </div>
                            
                            <div class="mensagem mensagem-aviso mt-30" id="mensagemPartido">
                                <i class="fas fa-info-circle"></i>
                                <div>Selecione uma ideologia na etapa anterior para visualizar os partidos disponíveis.</div>
                            </div>
                            
                            <div class="form-botoes mt-40">
                                <button class="btn btn-secundario" id="btnVoltarEtapa2">
                                    <i class="fas fa-arrow-left"></i>
                                    Voltar
                                </button>
                                <button class="btn btn-primario" id="btnEtapa2" disabled>
                                    Continuar
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Formulário Etapa 3 -->
                        <div class="form-etapa-conteudo hidden" id="etapa3">
                            <h3 class="mb-30">Composição da Chapa</h3>
                            <div id="conteudoEtapa3">
                                <!-- Dinâmico baseado no cargo -->
                            </div>
                            
                            <div class="form-botoes mt-40">
                                <button class="btn btn-secundario" id="btnVoltarEtapa3">
                                    <i class="fas fa-arrow-left"></i>
                                    Voltar
                                </button>
                                <button class="btn btn-primario" id="btnEtapa3" disabled>
                                    Continuar
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Formulário Etapa 4 -->
                        <div class="form-etapa-conteudo hidden" id="etapa4">
                            <h3 class="mb-30">Confirmação Final</h3>
                            
                            <div class="mensagem mensagem-aviso mb-30">
                                <i class="fas fa-exclamation-triangle"></i>
                                <div>
                                    <strong>Declaração de Uso:</strong> Este sistema é destinado exclusivamente para Roleplay (RP).
                                    Todos os dados aqui contidos são fictícios.
                                </div>
                            </div>
                            
                            <div class="card mb-30">
                                <h3 class="card-titulo mb-20">Resumo da Candidatura</h3>
                                <div id="resumoCandidatura">
                                    <!-- Preenchido dinamicamente -->
                                </div>
                            </div>
                            
                            <div class="form-botoes mt-40">
                                <button class="btn btn-secundario" id="btnVoltarEtapa4">
                                    <i class="fas fa-arrow-left"></i>
                                    Voltar
                                </button>
                                <button class="btn btn-terciario" id="btnEnviarCandidatura">
                                    <i class="fas fa-paper-plane"></i>
                                    Submeter Candidatura
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Análise de Candidaturas -->
                <div class="aba-conteudo" id="analise">
                    <div class="filtros-container">
                        <h2 class="filtros-titulo mb-30">
                            <i class="fas fa-clipboard-list-check"></i>
                            Sistema de Análise de Candidaturas
                        </h2>
                        
                        <div class="mensagem mensagem-aviso" id="mensagemAnalise">
                            <i class="fas fa-shield-alt"></i>
                            <div>Acesso restrito. Autentique-se como TRE ou TSE Nacional para acessar esta área.</div>
                        </div>
                        
                        <!-- Tabela de Análise -->
                        <div class="tabela-container hidden" id="tabelaAnaliseContainer">
                            <div class="tabela-header">
                                <h3><i class="fas fa-tasks"></i> Candidaturas para Análise</h3>
                            </div>
                            <div class="tabela-content">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Candidato</th>
                                            <th>Cargo</th>
                                            <th>Partido</th>
                                            <th>Local</th>
                                            <th>Status</th>
                                            <th>Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tabelaAnalise">
                                        <!-- Preenchido dinamicamente -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Login -->
                <div class="aba-conteudo" id="login">
                    <div style="max-width: 600px; margin: 0 auto;">
                        <h2 class="filtros-titulo texto-centro mb-40">
                            <i class="fas fa-terminal"></i>
                            Sistema de Autenticação
                        </h2>
                        
                        <div class="filtros-container">
                            <div class="login-opcoes" style="display: flex; gap: 20px; margin-bottom: 30px;">
                                <div class="login-opcao ativo" data-tipo="tse" 
                                     style="flex: 1; padding: 25px; border-radius: 15px; background: rgba(10, 25, 47, 0.5); 
                                            border: 2px solid var(--electric-blue); cursor: pointer; text-align: center;">
                                    <i class="fas fa-landmark" style="font-size: 40px; color: var(--electric-blue); margin-bottom: 15px;"></i>
                                    <h3 style="color: var(--electric-blue); margin-bottom: 10px;">TSE Nacional</h3>
                                    <p style="color: var(--silver); font-size: 14px;">Acesso Administrativo Completo</p>
                                </div>
                                <div class="login-opcao" data-tipo="tre" 
                                     style="flex: 1; padding: 25px; border-radius: 15px; background: rgba(10, 25, 47, 0.5); 
                                            border: 2px solid var(--silver); cursor: pointer; text-align: center;">
                                    <i class="fas fa-balance-scale" style="font-size: 40px; color: var(--silver); margin-bottom: 15px;"></i>
                                    <h3 style="color: var(--silver); margin-bottom: 10px;">TRE Regional</h3>
                                    <p style="color: var(--silver); font-size: 14px;">Acesso Regional para Análise</p>
                                </div>
                            </div>
                            
                            <!-- Formulário TSE -->
                            <div id="formLoginTSE">
                                <h3 class="mb-30">Acesso TSE Nacional</h3>
                                <div class="form-grid">
                                    <div class="filtro-group">
                                        <label class="filtro-label">
                                            <i class="fas fa-user-tie"></i>
                                            Presidente do TSE
                                        </label>
                                        <input type="text" class="form-input" id="tsePresidente" value="Tutu Protásio" readonly>
                                    </div>
                                    
                                    <div class="filtro-group">
                                        <label class="filtro-label">
                                            <i class="fas fa-key"></i>
                                            Senha de Acesso
                                        </label>
                                        <input type="password" class="form-input" id="tseSenha" placeholder="Insira a senha do TSE">
                                        <div class="card-detalhe mt-10">Senha fixa do sistema TSE Nacional</div>
                                    </div>
                                </div>
                                
                                <div class="form-botoes mt-40">
                                    <button class="btn btn-primario" id="btnLoginTSE">
                                        <i class="fas fa-sign-in-alt"></i>
                                        Autenticar como TSE
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Formulário TRE -->
                            <div class="hidden" id="formLoginTRE">
                                <h3 class="mb-30">Acesso TRE Regional</h3>
                                <div class="form-grid">
                                    <div class="filtro-group">
                                        <label class="filtro-label">
                                            <i class="fas fa-map-marked-alt"></i>
                                            Jurisdição do TRE
                                        </label>
                                        <div class="form-grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                                            <select class="form-select" id="treEstado">
                                                <option value="">Selecione o Estado</option>
                                                <!-- Estados serão preenchidos via JS -->
                                            </select>
                                            <select class="form-select" id="treCidade" disabled>
                                                <option value="">Selecione a Cidade</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="filtro-group">
                                        <label class="filtro-label">
                                            <i class="fas fa-user-tie"></i>
                                            Presidente do TRE
                                        </label>
                                        <input type="text" class="form-input" id="trePresidente" placeholder="Nome completo do presidente">
                                    </div>
                                    
                                    <div class="filtro-group">
                                        <label class="filtro-label">
                                            <i class="fas fa-key"></i>
                                            Senha de Acesso
                                        </label>
                                        <input type="password" class="form-input" id="treSenha" placeholder="Insira a senha do TRE">
                                        <div class="card-detalhe mt-10">
                                            Padrão: nomeSOBRENOMEESTADOOUCIDADE<br>
                                            Exemplos: tutuBH, andersonVC, alexBV
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-botoes mt-40">
                                    <button class="btn btn-primario" id="btnLoginTRE">
                                        <i class="fas fa-sign-in-alt"></i>
                                        Autenticar como TRE
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gerenciamento TSE -->
                <div class="aba-conteudo" id="gerenciamento">
                    <div class="filtros-container">
                        <h2 class="filtros-titulo mb-30">
                            <i class="fas fa-cogs"></i>
                            Controle Central do Sistema
                        </h2>
                        
                        <div class="mensagem mensagem-aviso" id="mensagemGerenciamento">
                            <i class="fas fa-lock"></i>
                            <div>Acesso exclusivo para TSE Nacional. Autentique-se para acessar.</div>
                        </div>
                        
                        <!-- Conteúdo do Gerenciamento -->
                        <div class="hidden" id="conteudoGerenciamento">
                            <div class="dashboard-cards mb-40">
                                <div class="card">
                                    <div class="card-titulo">
                                        <i class="fas fa-toggle-on"></i>
                                        STATUS DO SISTEMA
                                    </div>
                                    <div class="card-valor" id="statusEleicao">SISTEMA OFFLINE</div>
                                    <div class="card-detalhe mt-20">
                                        <button class="btn btn-terciario btn-pequeno" id="btnAlternarEleicao">
                                            <i class="fas fa-power-off"></i>
                                            Ativar Sistema
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-titulo">
                                        <i class="fas fa-vote-yea"></i>
                                        MODO DE ELEIÇÃO
                                    </div>
                                    <div class="card-valor" id="tipoEleicao">NÃO CONFIGURADO</div>
                                    <div class="card-detalhe mt-20">
                                        <select class="form-select" id="selectTipoEleicao">
                                            <option value="">Selecionar Tipo</option>
                                            <option value="municipal">Eleição Municipal</option>
                                            <option value="federal">Eleição Federal</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-titulo">
                                        <i class="fas fa-landmark"></i>
                                        PARTIDOS REGISTRADOS
                                    </div>
                                    <div class="card-valor" id="totalPartidos">51</div>
                                    <div class="card-detalhe">Ativos no Sistema</div>
                                </div>
                            </div>
                            
                            <!-- Controle de Partidos -->
                            <div class="tabela-container">
                                <div class="tabela-header">
                                    <h3><i class="fas fa-list"></i> Sistema de Partidos Políticos</h3>
                                </div>
                                <div class="mensagem mensagem-aviso" style="margin: 20px;">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <div><strong>Política de Partidos:</strong> Partidos não podem ser renomeados, removidos ou alterados em sua ideologia. Somente o TSE Nacional pode modificar a lista oficial.</div>
                                </div>
                                <div class="tabela-content">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Sigla</th>
                                                <th>Número</th>
                                                <th>Nome Completo</th>
                                                <th>Posicionamento</th>
                                                <th>Tipo</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabelaPartidos">
                                            <!-- Preenchido via JS -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes -->
    <div class="modal" id="modalDetalhes">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-tie"></i> Detalhes da Candidatura</h3>
            </div>
            <div class="modal-body">
                <div id="conteudoModalDetalhes"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secundario" id="btnFecharModal">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Análise -->
    <div class="modal" id="modalAnalise">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-clipboard-check"></i> Análise de Candidatura</h3>
            </div>
            <div class="modal-body">
                <div id="conteudoModalAnalise"></div>
                <div class="filtro-group mt-30">
                    <label class="filtro-label">Motivo da Recusa (se aplicável)</label>
                    <textarea class="form-input" id="motivoRecusa" rows="3" placeholder="Informe detalhadamente o motivo da recusa, caso necessário"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secundario" id="btnCancelarAnalise">Cancelar</button>
                <button class="btn" id="btnRecusarCandidatura" 
                        style="background: linear-gradient(135deg, var(--warning-red), #ff3366); color: white;">
                    Recusar
                </button>
                <button class="btn btn-terciario" id="btnAprovarCandidatura">Aprovar</button>
            </div>
        </div>
    </div>

    <script>
        // Dados do Sistema
        const DADOS_SISTEMA = {
            estados: [
                { nome: "BROOKHAVEN", cidades: ["Cidade Eleitoral", "Liberty City"] },
                { nome: "NOVACORE", cidades: ["Nexaville", "Solária"] },
                { nome: "CASTERÍBER", cidades: ["Castelo Verde", "Monte Prata"] },
                { nome: "FORTEMEGA", cidades: ["Marinha City", "Porto Rubi"] },
                { nome: "FLORÊMIX", cidades: ["Florápolis", "Riomarina"] },
                { nome: "BRAVILAND", cidades: ["Soberana", "Vila Coletiva"] }
            ],
            
            tiposEleicao: {
                municipal: {
                    nome: "Eleição Municipal",
                    cargos: [
                        { nome: "Prefeito", digitos: 2 },
                        { nome: "Vereador", digitos: 5 }
                    ]
                },
                federal: {
                    nome: "Eleição Federal",
                    cargos: [
                        { nome: "Presidente", digitos: 2 },
                        { nome: "Governador", digitos: 2 },
                        { nome: "Senador", digitos: 3 },
                        { nome: "Deputado Federal", digitos: 4 },
                        { nome: "Deputado Estadual", digitos: 5 }
                    ]
                }
            },
            
            partidos: {
                direita: [
                    { sigla: "PL", numero: 22, nome: "Partido Liberal" },
                    { sigla: "PP", numero: 11, nome: "Progressistas" },
                    { sigla: "Republicanos", numero: 10, nome: "Republicanos" },
                    { sigla: "NOVO", numero: 30, nome: "Partido Novo" },
                    { sigla: "PRD", numero: 25, nome: "Partido Renovação Democrática" },
                    { sigla: "Patriota", numero: 51, nome: "Patriota" },
                    { sigla: "PRTB", numero: 28, nome: "Partido Renovador Trabalhista Brasileiro" },
                    { sigla: "DC", numero: 27, nome: "Democracia Cristã" },
                    { sigla: "Agir", numero: 36, nome: "Agir" },
                    { sigla: "PMB", numero: 35, nome: "Partido da Mulher Brasileira" },
                    { sigla: "UDB", numero: 38, nome: "União da Direita Brookasileira" },
                    { sigla: "POL", numero: 81, nome: "Partido da Ordem e Liberdade" },
                    { sigla: "ACN", numero: 84, nome: "Aliança Cristã Nacional" },
                    { sigla: "PRONA", numero: 57, nome: "Partido da Reedificação da Ordem Nacional" },
                    { sigla: "PSL", numero: 17, nome: "Partido Social Liberal" },
                    { sigla: "PESP", numero: 48, nome: "Partido da Esperança" },
                    { sigla: "PMNL", numero: 86, nome: "Partido Militar Nacionalista" },
                    { sigla: "PRTN", numero: 75, nome: "Partido Republicano Trabalhista Nacional" }
                ],
                centro: [
                    { sigla: "MDB", numero: 15, nome: "Movimento Democrático Brasileiro" },
                    { sigla: "UNIÃO", numero: 44, nome: "União Brasil" },
                    { sigla: "PSD", numero: 55, nome: "Partido Social Democrático" },
                    { sigla: "Podemos", numero: 20, nome: "Podemos" },
                    { sigla: "PSDB", numero: 45, nome: "Partido da Social Democracia Brasileira" },
                    { sigla: "Cidadania", numero: 23, nome: "Cidadania (CDN)" },
                    { sigla: "Solidariedade", numero: 77, nome: "Solidariedade" },
                    { sigla: "Avante", numero: 70, nome: "Avante" },
                    { sigla: "PMN", numero: 33, nome: "Partido da Mobilização Nacional" },
                    { sigla: "PROS", numero: 90, nome: "PROS" },
                    { sigla: "PV", numero: 43, nome: "Partido Verde" },
                    { sigla: "PUN", numero: 42, nome: "Partido da União Nacional" },
                    { sigla: "MPD", numero: 37, nome: "Movimento Popular Democrático" },
                    { sigla: "PDM", numero: 26, nome: "Partido da Mudança" },
                    { sigla: "MTB", numero: 63, nome: "Movimento Trabalhista Brookasileiro" },
                    { sigla: "PTD", numero: 46, nome: "Partido Trabalhista Democrático" },
                    { sigla: "PDSD", numero: 88, nome: "Partido do Sindicato Democrata" },
                    { sigla: "MSS", numero: 14, nome: "Partido Missão" },
                    { sigla: "PC", numero: 85, nome: "Partido Construção" }
                ],
                esquerda: [
                    { sigla: "PT", numero: 13, nome: "Partido dos Trabalhadores" },
                    { sigla: "PSOL", numero: 50, nome: "Partido Socialismo e Liberdade" },
                    { sigla: "PCdoB", numero: 65, nome: "Partido Comunista do Brasil" },
                    { sigla: "REDE", numero: 18, nome: "Rede Sustentabilidade" },
                    { sigla: "PDT", numero: 12, nome: "Partido Democrático Trabalhista" },
                    { sigla: "UP", numero: 80, nome: "Unidade Popular" },
                    { sigla: "PCO", numero: 29, nome: "Partido da Causa Operária" },
                    { sigla: "PCB", numero: 21, nome: "Partido Comunista Brasileiro" },
                    { sigla: "PSTU", numero: 16, nome: "Partido Socialista dos Trabalhadores Unificado" },
                    { sigla: "PPL", numero: 54, nome: "Partido Pátria Livre" },
                    { sigla: "PSB", numero: 40, nome: "Partido Socialista Brasileiro" },
                    { sigla: "PFS", numero: 60, nome: "Partido da Frente Socialista" },
                    { sigla: "PS", numero: 56, nome: "Partido Socialista" },
                    { sigla: "PSTN", numero: 31, nome: "Partido Social Trabalhista Nacional" }
                ]
            },
            
            tse: {
                presidente: "Tutu Protásio",
                senha: "Brookasil1234"
            },
            
            senhasTRE: {
                "BROOKHAVEN": {
                    "Cidade Eleitoral": "tutuCE",
                    "Liberty City": "tutuLC"
                },
                "NOVACORE": {
                    "Nexaville": "williamNV",
                    "Solária": "pedroSR"
                },
                "CASTERÍBER": {
                    "Castelo Verde": "ryanCV",
                    "Monte Prata": "jacintoMP"
                },
                "FORTEMEGA": {
                    "Marinha City": "lucasMC",
                    "Porto Rubi": "daviPR"
                },
                "FLORÊMIX": {
                    "Florápolis": "rhyanFP",
                    "Riomarina": "pedroRM"
                },
                "BRAVILAND": {
                    "Soberana": "alexSB",
                    "Vila Coletiva": "andersonVC"
                }
            }
        };

        // Estado do Sistema
        let estadoSistema = {
            usuarioAutenticado: false,
            tipoUsuario: null,
            usuarioInfo: null,
            tipoEleicaoAtual: null,
            eleicaoAberta: false,
            candidaturas: [],
            etapaAtual: 1,
            dadosCandidatura: {
                etapa1: {},
                etapa2: {},
                etapa3: {},
                etapa4: {}
            }
        };

        // Firebase URL
        const FIREBASE_URL = "https://candidatura-cde-default-rtdb.firebaseio.com/candidaturas.json";

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            inicializarSistema();
            carregarDadosIniciais();
            configurarEventListeners();
            carregarDadosFirebase();
        });

        // Funções de Inicialização
        async function carregarDadosFirebase() {
            try {
                const response = await fetch(FIREBASE_URL);
                const data = await response.json();
                
                if (data) {
                    estadoSistema.candidaturas = Object.values(data);
                    atualizarDashboard();
                    atualizarTabelaCandidatos();
                }
            } catch (error) {
                console.error("Erro ao carregar dados do Firebase:", error);
                // Carregar dados do localStorage como fallback
                carregarDadosLocalStorage();
            }
        }

        async function salvarDadosFirebase() {
            try {
                const response = await fetch(FIREBASE_URL, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(estadoSistema.candidaturas)
                });
                
                if (!response.ok) {
                    throw new Error('Erro ao salvar no Firebase');
                }
            } catch (error) {
                console.error("Erro ao salvar no Firebase:", error);
                // Salvar no localStorage como fallback
                salvarDadosLocalStorage();
            }
        }

        function carregarDadosLocalStorage() {
            const dados = localStorage.getItem('sistemaEleitoralBrookasil');
            if (dados) {
                try {
                    const parsed = JSON.parse(dados);
                    estadoSistema.candidaturas = parsed.candidaturas || [];
                    estadoSistema.tipoEleicaoAtual = parsed.tipoEleicaoAtual;
                    estadoSistema.eleicaoAberta = parsed.eleicaoAberta || false;
                    
                    atualizarDashboard();
                    atualizarTabelaCandidatos();
                } catch (e) {
                    console.error("Erro ao carregar dados locais:", e);
                }
            }
        }

        function salvarDadosLocalStorage() {
            const dados = {
                candidaturas: estadoSistema.candidaturas,
                tipoEleicaoAtual: estadoSistema.tipoEleicaoAtual,
                eleicaoAberta: estadoSistema.eleicaoAberta
            };
            localStorage.setItem('sistemaEleitoralBrookasil', JSON.stringify(dados));
        }

        function inicializarSistema() {
            console.log("⚡ Sistema Eleitoral Brookasil 2026 - Inicializado");
            console.log("🔒 Versão: IA NÃO PODE ERRAR v5 — SISTEMA ANTI-BURLA");
            document.getElementById('usuarioNome').textContent = "SISTEMA PRINCIPAL";
            document.getElementById('usuarioCargo').textContent = "SISTEMA INICIADO";
        }

        function carregarDadosIniciais() {
            // Carregar estados
            DADOS_SISTEMA.estados.forEach(estado => {
                const option = document.createElement('option');
                option.value = estado.nome;
                option.textContent = estado.nome;
                
                const clones = [
                    document.getElementById('candidatoEstado'),
                    document.getElementById('filtroEstado'),
                    document.getElementById('treEstado')
                ];
                
                clones.forEach(select => {
                    if (select) {
                        const newOption = option.cloneNode(true);
                        select.appendChild(newOption);
                    }
                });
            });

            // Carregar cargos
            const cargos = [
                ...DADOS_SISTEMA.tiposEleicao.municipal.cargos,
                ...DADOS_SISTEMA.tiposEleicao.federal.cargos
            ];

            cargos.forEach(cargo => {
                const option = document.createElement('option');
                option.value = cargo.nome;
                option.textContent = `${cargo.nome} (${cargo.digitos} dígitos)`;
                
                const selects = [
                    document.getElementById('candidatoCargo'),
                    document.getElementById('filtroCargo')
                ];
                
                selects.forEach(select => {
                    if (select) {
                        const newOption = option.cloneNode(true);
                        select.appendChild(newOption);
                    }
                });
            });

            // Carregar partidos no filtro
            const selectFiltroPartido = document.getElementById('filtroPartido');
            Object.values(DADOS_SISTEMA.partidos).flat().forEach(partido => {
                const option = document.createElement('option');
                option.value = partido.sigla;
                option.textContent = `${partido.sigla} (${partido.numero})`;
                selectFiltroPartido.appendChild(option);
            });

            preencherTabelaPartidos();
        }

        function configurarEventListeners() {
            // Navegação entre abas
            document.querySelectorAll('.aba-item').forEach(aba => {
                aba.addEventListener('click', function() {
                    const abaId = this.getAttribute('data-aba');
                    navegarParaAba(abaId);
                });
            });

            // Botões de ideologia
            document.querySelectorAll('.ideologia-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const ideologia = this.getAttribute('data-ideologia');
                    document.getElementById('candidatoIdeologia').value = ideologia;
                    
                    // Atualizar botões
                    document.querySelectorAll('.ideologia-btn').forEach(b => {
                        b.classList.remove('btn-primario');
                        b.classList.add('btn-secundario');
                    });
                    this.classList.remove('btn-secundario');
                    this.classList.add('btn-primario');
                    
                    validarEtapa1();
                });
            });

            // Etapa 1
            document.getElementById('candidatoEstado').addEventListener('change', function() {
                const estadoSelecionado = this.value;
                const selectCidade = document.getElementById('candidatoCidade');
                
                selectCidade.innerHTML = '<option value="">Selecione uma cidade</option>';
                selectCidade.disabled = !estadoSelecionado;
                
                if (estadoSelecionado) {
                    const estado = DADOS_SISTEMA.estados.find(e => e.nome === estadoSelecionado);
                    if (estado) {
                        estado.cidades.forEach(cidade => {
                            const option = document.createElement('option');
                            option.value = cidade;
                            option.textContent = cidade;
                            selectCidade.appendChild(option);
                        });
                    }
                }
                validarEtapa1();
            });

            document.getElementById('candidatoIdeologia').addEventListener('change', function() {
                const ideologiaSelecionada = this.value;
                const selectPartido = document.getElementById('candidatoPartido');
                
                selectPartido.innerHTML = '<option value="">Selecione um partido</option>';
                selectPartido.disabled = !ideologiaSelecionada;
                
                if (ideologiaSelecionada && DADOS_SISTEMA.partidos[ideologiaSelecionada]) {
                    const partidosOrdenados = [...DADOS_SISTEMA.partidos[ideologiaSelecionada]].sort((a, b) => a.numero - b.numero);
                    
                    partidosOrdenados.forEach(partido => {
                        const option = document.createElement('option');
                        option.value = partido.sigla;
                        option.textContent = `${partido.sigla} (${partido.numero}) - ${partido.nome}`;
                        selectPartido.appendChild(option);
                    });
                    
                    document.getElementById('mensagemPartido').innerHTML = `
                        <i class="fas fa-check-circle"></i>
                        <div>${partidosOrdenados.length} partidos da ${ideologiaSelecionada} carregados.</div>
                    `;
                    document.getElementById('mensagemPartido').className = "mensagem mensagem-sucesso";
                }
                validarEtapa1();
            });

            // Validação dos campos
            ['candidatoCargo', 'candidatoCidade', 'candidatoNome', 'candidatoSobrenome', 'candidatoTiktok'].forEach(id => {
                document.getElementById(id).addEventListener('input', validarEtapa1);
            });

            // Botões das etapas
            document.getElementById('btnEtapa1').addEventListener('click', avancarParaEtapa2);
            document.getElementById('btnVoltarEtapa2').addEventListener('click', voltarParaEtapa1);
            document.getElementById('btnEtapa2').addEventListener('click', avancarParaEtapa3);
            document.getElementById('btnVoltarEtapa3').addEventListener('click', voltarParaEtapa2);
            document.getElementById('btnEtapa3').addEventListener('click', avancarParaEtapa4);
            document.getElementById('btnVoltarEtapa4').addEventListener('click', voltarParaEtapa3);
            document.getElementById('btnEnviarCandidatura').addEventListener('click', enviarCandidatura);

            // Filtros
            document.querySelectorAll('.filtro-select').forEach(select => {
                select.addEventListener('change', atualizarTabelaCandidatos);
            });

            // Login
            document.querySelectorAll('.login-opcao').forEach(opcao => {
                opcao.addEventListener('click', function() {
                    const tipo = this.getAttribute('data-tipo');
                    
                    document.querySelectorAll('.login-opcao').forEach(o => {
                        o.classList.remove('ativo');
                        o.style.borderColor = 'var(--silver)';
                    });
                    
                    this.classList.add('ativo');
                    this.style.borderColor = 'var(--electric-blue)';
                    
                    if (tipo === 'tse') {
                        document.getElementById('formLoginTSE').classList.remove('hidden');
                        document.getElementById('formLoginTRE').classList.add('hidden');
                    } else {
                        document.getElementById('formLoginTSE').classList.add('hidden');
                        document.getElementById('formLoginTRE').classList.remove('hidden');
                    }
                });
            });

            document.getElementById('treEstado').addEventListener('change', function() {
                const estadoSelecionado = this.value;
                const selectCidade = document.getElementById('treCidade');
                
                selectCidade.innerHTML = '<option value="">Selecione uma cidade</option>';
                selectCidade.disabled = !estadoSelecionado;
                
                if (estadoSelecionado) {
                    const estado = DADOS_SISTEMA.estados.find(e => e.nome === estadoSelecionado);
                    if (estado) {
                        estado.cidades.forEach(cidade => {
                            const option = document.createElement('option');
                            option.value = cidade;
                            option.textContent = cidade;
                            selectCidade.appendChild(option);
                        });
                    }
                }
            });

            document.getElementById('btnLoginTSE').addEventListener('click', fazerLoginTSE);
            document.getElementById('btnLoginTRE').addEventListener('click', fazerLoginTRE);

            // Gerenciamento TSE
            document.getElementById('btnAlternarEleicao').addEventListener('click', alternarStatusEleicao);
            document.getElementById('selectTipoEleicao').addEventListener('change', function() {
                estadoSistema.tipoEleicaoAtual = this.value;
                document.getElementById('tipoEleicao').textContent = 
                    this.value ? DADOS_SISTEMA.tiposEleicao[this.value].nome.toUpperCase() : "NÃO CONFIGURADO";
                salvarDadosFirebase();
                salvarDadosLocalStorage();
            });

            // Modais
            document.getElementById('btnFecharModal').addEventListener('click', function() {
                document.getElementById('modalDetalhes').classList.remove('ativo');
            });
            
            document.getElementById('btnCancelarAnalise').addEventListener('click', function() {
                document.getElementById('modalAnalise').classList.remove('ativo');
            });
            
            document.getElementById('btnAprovarCandidatura').addEventListener('click', aprovarCandidatura);
            document.getElementById('btnRecusarCandidatura').addEventListener('click', recusarCandidatura);
            
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('ativo');
                    }
                });
            });
        }

        // Funções de Navegação
        function navegarParaAba(abaId) {
            document.querySelectorAll('.aba-item').forEach(aba => {
                aba.classList.remove('ativo');
            });
            
            document.querySelector(`.aba-item[data-aba="${abaId}"]`).classList.add('ativo');
            
            document.querySelectorAll('.aba-conteudo').forEach(conteudo => {
                conteudo.classList.remove('ativo');
            });
            
            document.getElementById(abaId).classList.add('ativo');
            
            if (abaId === 'dashboard') {
                atualizarDashboard();
            }
            
            if ((abaId === 'analise' || abaId === 'gerenciamento') && !estadoSistema.usuarioAutenticado) {
                if (abaId === 'analise') {
                    document.getElementById('tabelaAnaliseContainer').classList.add('hidden');
                    document.getElementById('mensagemAnalise').classList.remove('hidden');
                } else if (abaId === 'gerenciamento') {
                    document.getElementById('conteudoGerenciamento').classList.add('hidden');
                    document.getElementById('mensagemGerenciamento').classList.remove('hidden');
                }
            } else if (abaId === 'analise' && estadoSistema.usuarioAutenticado) {
                document.getElementById('tabelaAnaliseContainer').classList.remove('hidden');
                document.getElementById('mensagemAnalise').classList.add('hidden');
                atualizarTabelaAnalise();
            } else if (abaId === 'gerenciamento' && estadoSistema.tipoUsuario === 'tse') {
                document.getElementById('conteudoGerenciamento').classList.remove('hidden');
                document.getElementById('mensagemGerenciamento').classList.add('hidden');
                
                document.getElementById('statusEleicao').textContent = 
                    estadoSistema.eleicaoAberta ? "SISTEMA ONLINE" : "SISTEMA OFFLINE";
                document.getElementById('btnAlternarEleicao').innerHTML = 
                    estadoSistema.eleicaoAberta ? 
                    '<i class="fas fa-power-off"></i> Desativar Sistema' : 
                    '<i class="fas fa-power-off"></i> Ativar Sistema';
                    
                document.getElementById('tipoEleicao').textContent = 
                    estadoSistema.tipoEleicaoAtual ? 
                    DADOS_SISTEMA.tiposEleicao[estadoSistema.tipoEleicaoAtual].nome.toUpperCase() : 
                    "NÃO CONFIGURADO";
                    
                document.getElementById('selectTipoEleicao').value = estadoSistema.tipoEleicaoAtual || "";
            }
        }

        // Funções do Formulário
        function validarEtapa1() {
            const campos = {
                nome: document.getElementById('candidatoNome').value.trim(),
                sobrenome: document.getElementById('candidatoSobrenome').value.trim(),
                tiktok: document.getElementById('candidatoTiktok').value.trim(),
                ideologia: document.getElementById('candidatoIdeologia').value,
                cargo: document.getElementById('candidatoCargo').value,
                estado: document.getElementById('candidatoEstado').value,
                cidade: document.getElementById('candidatoCidade').value
            };
            
            const valido = campos.nome && campos.sobrenome && campos.tiktok && 
                         campos.tiktok.includes('@') && campos.ideologia && 
                         campos.cargo && campos.estado && campos.cidade;
            
            document.getElementById('btnEtapa1').disabled = !valido;
            
            if (valido) {
                estadoSistema.dadosCandidatura.etapa1 = campos;
            }
            
            return valido;
        }

        function validarEtapa2() {
            const partido = document.getElementById('candidatoPartido').value;
            const numero = document.getElementById('candidatoNumero').value;
            
            const valido = partido && numero && numero.length > 0 && 
                         !document.getElementById('btnEtapa2').disabled;
            
            document.getElementById('btnEtapa2').disabled = !valido;
            
            if (valido) {
                estadoSistema.dadosCandidatura.etapa2 = { partido, numero };
            }
            
            return valido;
        }

        function avancarParaEtapa2() {
            if (validarEtapa1()) {
                document.querySelectorAll('.etapa').forEach(etapa => {
                    etapa.classList.remove('ativo', 'concluido');
                });
                
                document.querySelector('.etapa[data-etapa="1"]').classList.add('concluido');
                document.querySelector('.etapa[data-etapa="2"]').classList.add('ativo');
                
                document.getElementById('etapa1').classList.add('hidden');
                document.getElementById('etapa2').classList.remove('hidden');
                
                estadoSistema.etapaAtual = 2;
                
                const ideologia = estadoSistema.dadosCandidatura.etapa1.ideologia;
                document.getElementById('candidatoIdeologia').value = ideologia;
                
                const event = new Event('change');
                document.getElementById('candidatoIdeologia').dispatchEvent(event);
                
                validarEtapa2();
            }
        }

        function voltarParaEtapa1() {
            document.querySelectorAll('.etapa').forEach(etapa => {
                etapa.classList.remove('ativo', 'concluido');
            });
            
            document.querySelector('.etapa[data-etapa="1"]').classList.add('ativo');
            
            document.getElementById('etapa2').classList.add('hidden');
            document.getElementById('etapa1').classList.remove('hidden');
            
            estadoSistema.etapaAtual = 1;
        }

        function avancarParaEtapa3() {
            if (validarEtapa2()) {
                document.querySelectorAll('.etapa').forEach(etapa => {
                    etapa.classList.remove('ativo', 'concluido');
                });
                
                document.querySelector('.etapa[data-etapa="1"]').classList.add('concluido');
                document.querySelector('.etapa[data-etapa="2"]').classList.add('concluido');
                document.querySelector('.etapa[data-etapa="3"]').classList.add('ativo');
                
                document.getElementById('etapa2').classList.add('hidden');
                document.getElementById('etapa3').classList.remove('hidden');
                
                estadoSistema.etapaAtual = 3;
                prepararEtapa3();
            }
        }

        function prepararEtapa3() {
            const cargo = estadoSistema.dadosCandidatura.etapa1.cargo;
            const conteudoEtapa3 = document.getElementById('conteudoEtapa3');
            
            const cargos2Digitos = ["Presidente", "Governador", "Prefeito"];
            const cargosComSuplente = ["Senador", "Deputado Federal", "Deputado Estadual", "Vereador"];
            
            if (cargos2Digitos.includes(cargo)) {
                conteudoEtapa3.innerHTML = `
                    <div class="form-grid">
                        <div class="filtro-group">
                            <label class="filtro-label">
                                <i class="fas fa-user"></i>
                                Vice
                            </label>
                            <div class="form-grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                                <input type="text" class="form-input" id="viceNome" placeholder="Nome">
                                <input type="text" class="form-input" id="viceSobrenome" placeholder="Sobrenome">
                            </div>
                            <input type="text" class="form-input mt-10" id="viceTiktok" placeholder="@usuariovice (opcional)">
                        </div>
                    </div>
                `;
                
                setTimeout(() => {
                    document.getElementById('viceNome').addEventListener('input', validarEtapa3);
                    document.getElementById('viceSobrenome').addEventListener('input', validarEtapa3);
                    validarEtapa3();
                }, 100);
            } else if (cargosComSuplente.includes(cargo)) {
                conteudoEtapa3.innerHTML = `
                    <div class="form-grid">
                        <div class="filtro-group">
                            <label class="filtro-label">
                                <i class="fas fa-user"></i>
                                Suplente
                            </label>
                            <div class="form-grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                                <input type="text" class="form-input" id="suplenteNome" placeholder="Nome">
                                <input type="text" class="form-input" id="suplenteSobrenome" placeholder="Sobrenome">
                            </div>
                            <input type="text" class="form-input mt-10" id="suplenteTiktok" placeholder="@usuariosuplente (opcional)">
                        </div>
                    </div>
                `;
                
                setTimeout(() => {
                    document.getElementById('suplenteNome').addEventListener('input', validarEtapa3);
                    document.getElementById('suplenteSobrenome').addEventListener('input', validarEtapa3);
                    validarEtapa3();
                }, 100);
            } else {
                conteudoEtapa3.innerHTML = `
                    <div class="mensagem mensagem-aviso">
                        <i class="fas fa-info-circle"></i>
                        <div>Não é necessário registrar vice ou suplente para este cargo.</div>
                    </div>
                `;
                document.getElementById('btnEtapa3').disabled = false;
            }
        }

        function validarEtapa3() {
            const cargo = estadoSistema.dadosCandidatura.etapa1.cargo;
            const cargos2Digitos = ["Presidente", "Governador", "Prefeito"];
            const cargosComSuplente = ["Senador", "Deputado Federal", "Deputado Estadual", "Vereador"];
            
            let valido = true;
            
            if (cargos2Digitos.includes(cargo)) {
                const viceNome = document.getElementById('viceNome')?.value.trim();
                const viceSobrenome = document.getElementById('viceSobrenome')?.value.trim();
                
                valido = viceNome && viceSobrenome;
                
                if (valido) {
                    const viceTiktok = document.getElementById('viceTiktok')?.value.trim() || "";
                    estadoSistema.dadosCandidatura.etapa3 = {
                        vice: { nome: viceNome, sobrenome: viceSobrenome, tiktok: viceTiktok }
                    };
                }
            } else if (cargosComSuplente.includes(cargo)) {
                const suplenteNome = document.getElementById('suplenteNome')?.value.trim();
                const suplenteSobrenome = document.getElementById('suplenteSobrenome')?.value.trim();
                
                valido = suplenteNome && suplenteSobrenome;
                
                if (valido) {
                    const suplenteTiktok = document.getElementById('suplenteTiktok')?.value.trim() || "";
                    estadoSistema.dadosCandidatura.etapa3 = {
                        suplente: { nome: suplenteNome, sobrenome: suplenteSobrenome, tiktok: suplenteTiktok }
                    };
                }
            }
            
            document.getElementById('btnEtapa3').disabled = !valido;
            return valido;
        }

        function voltarParaEtapa2() {
            document.querySelectorAll('.etapa').forEach(etapa => {
                etapa.classList.remove('ativo', 'concluido');
            });
            
            document.querySelector('.etapa[data-etapa="1"]').classList.add('concluido');
            document.querySelector('.etapa[data-etapa="2"]').classList.add('ativo');
            
            document.getElementById('etapa3').classList.add('hidden');
            document.getElementById('etapa2').classList.remove('hidden');
            
            estadoSistema.etapaAtual = 2;
        }

        function avancarParaEtapa4() {
            if (validarEtapa3()) {
                document.querySelectorAll('.etapa').forEach(etapa => {
                    etapa.classList.remove('ativo', 'concluido');
                });
                
                document.querySelector('.etapa[data-etapa="1"]').classList.add('concluido');
                document.querySelector('.etapa[data-etapa="2"]').classList.add('concluido');
                document.querySelector('.etapa[data-etapa="3"]').classList.add('concluido');
                document.querySelector('.etapa[data-etapa="4"]').classList.add('ativo');
                
                document.getElementById('etapa3').classList.add('hidden');
                document.getElementById('etapa4').classList.remove('hidden');
                
                estadoSistema.etapaAtual = 4;
                prepararResumoCandidatura();
            }
        }

        function prepararResumoCandidatura() {
            const dados = estadoSistema.dadosCandidatura;
            const resumo = document.getElementById('resumoCandidatura');
            
            let partidoInfo = null;
            Object.values(DADOS_SISTEMA.partidos).flat().some(partido => {
                if (partido.sigla === dados.etapa2.partido) {
                    partidoInfo = partido;
                    return true;
                }
                return false;
            });
            
            let conteudoResumo = `
                <div class="form-grid">
                    <div class="filtro-group">
                        <label class="filtro-label">Candidato:</label>
                        <div>${dados.etapa1.nome} ${dados.etapa1.sobrenome}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">TikTok:</label>
                        <div>${dados.etapa1.tiktok}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Cargo:</label>
                        <div>${dados.etapa1.cargo}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Local:</label>
                        <div>${dados.etapa1.estado} / ${dados.etapa1.cidade}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Partido:</label>
                        <div>${partidoInfo ? `${partidoInfo.sigla} - ${partidoInfo.nome}` : dados.etapa2.partido}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Número:</label>
                        <div><strong>${dados.etapa2.numero}</strong></div>
                    </div>
                </div>
            `;
            
            if (dados.etapa3.vice) {
                conteudoResumo += `
                    <div class="mt-30">
                        <h4 class="filtro-label">Vice</h4>
                        <div class="form-grid">
                            <div class="filtro-group">
                                <label class="filtro-label">Nome:</label>
                                <div>${dados.etapa3.vice.nome} ${dados.etapa3.vice.sobrenome}</div>
                            </div>
                            <div class="filtro-group">
                                <label class="filtro-label">TikTok:</label>
                                <div>${dados.etapa3.vice.tiktok || "Não informado"}</div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (dados.etapa3.suplente) {
                conteudoResumo += `
                    <div class="mt-30">
                        <h4 class="filtro-label">Suplente</h4>
                        <div class="form-grid">
                            <div class="filtro-group">
                                <label class="filtro-label">Nome:</label>
                                <div>${dados.etapa3.suplente.nome} ${dados.etapa3.suplente.sobrenome}</div>
                            </div>
                            <div class="filtro-group">
                                <label class="filtro-label">TikTok:</label>
                                <div>${dados.etapa3.suplente.tiktok || "Não informado"}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            resumo.innerHTML = conteudoResumo;
        }

        function voltarParaEtapa3() {
            document.querySelectorAll('.etapa').forEach(etapa => {
                etapa.classList.remove('ativo', 'concluido');
            });
            
            document.querySelector('.etapa[data-etapa="1"]').classList.add('concluido');
            document.querySelector('.etapa[data-etapa="2"]').classList.add('concluido');
            document.querySelector('.etapa[data-etapa="3"]').classList.add('ativo');
            
            document.getElementById('etapa4').classList.add('hidden');
            document.getElementById('etapa3').classList.remove('hidden');
            
            estadoSistema.etapaAtual = 3;
        }

        async function enviarCandidatura() {
            if (!estadoSistema.eleicaoAberta) {
                alert("⚠️ O sistema eleitoral está offline. Ative o sistema para registrar candidaturas.");
                return;
            }
            
            const dados = estadoSistema.dadosCandidatura;
            const id = Date.now() + Math.floor(Math.random() * 1000);
            
            const novaCandidatura = {
                id: id,
                nome: dados.etapa1.nome,
                sobrenome: dados.etapa1.sobrenome,
                tiktok: dados.etapa1.tiktok,
                ideologia: dados.etapa1.ideologia,
                cargo: dados.etapa1.cargo,
                estado: dados.etapa1.estado,
                cidade: dados.etapa1.cidade,
                partido: dados.etapa2.partido,
                numero: dados.etapa2.numero,
                vice: dados.etapa3.vice || null,
                suplente: dados.etapa3.suplente || null,
                status: "analise",
                motivoRecusa: "",
                dataRegistro: new Date().toISOString()
            };
            
            estadoSistema.candidaturas.push(novaCandidatura);
            
            await salvarDadosFirebase();
            salvarDadosLocalStorage();
            
            atualizarDashboard();
            atualizarTabelaCandidatos();
            
            alert("✅ Candidatura registrada com sucesso! Status: EM ANÁLISE");
            
            resetarFormularioCandidatura();
            voltarParaEtapa1();
            navegarParaAba('dashboard');
        }

        function resetarFormularioCandidatura() {
            document.getElementById('candidatoNome').value = "";
            document.getElementById('candidatoSobrenome').value = "";
            document.getElementById('candidatoTiktok').value = "";
            document.getElementById('candidatoIdeologia').value = "";
            document.getElementById('candidatoCargo').value = "";
            document.getElementById('candidatoEstado').value = "";
            document.getElementById('candidatoCidade').innerHTML = '<option value="">Selecione uma cidade</option>';
            document.getElementById('candidatoCidade').disabled = true;
            document.getElementById('candidatoPartido').innerHTML = '<option value="">Selecione um partido</option>';
            document.getElementById('candidatoPartido').disabled = true;
            document.getElementById('candidatoNumero').value = "";
            
            document.querySelectorAll('.ideologia-btn').forEach(btn => {
                btn.classList.remove('btn-primario');
                btn.classList.add('btn-secundario');
            });
            
            document.querySelectorAll('.etapa').forEach(etapa => {
                etapa.classList.remove('ativo', 'concluido');
            });
            
            document.querySelector('.etapa[data-etapa="1"]').classList.add('ativo');
            
            document.querySelectorAll('.form-etapa-conteudo').forEach(etapa => {
                etapa.classList.add('hidden');
            });
            
            document.getElementById('etapa1').classList.remove('hidden');
            
            estadoSistema.dadosCandidatura = { etapa1: {}, etapa2: {}, etapa3: {}, etapa4: {} };
            estadoSistema.etapaAtual = 1;
        }

        // Funções Auxiliares
        function atualizarDashboard() {
            const total = estadoSistema.candidaturas.length;
            const aprovados = estadoSistema.candidaturas.filter(c => c.status === "aprovado").length;
            const analise = estadoSistema.candidaturas.filter(c => c.status === "analise").length;
            const recusados = estadoSistema.candidaturas.filter(c => c.status === "recusado").length;
            
            document.getElementById('totalCandidatos').textContent = total;
            document.getElementById('totalAprovados').textContent = aprovados;
            document.getElementById('totalAnalise').textContent = analise;
            document.getElementById('totalRecusados').textContent = recusados;
        }

        function atualizarTabelaCandidatos() {
            const tbody = document.getElementById('tabelaCandidatos');
            tbody.innerHTML = "";
            
            const filtros = {
                estado: document.getElementById('filtroEstado').value,
                cidade: document.getElementById('filtroCidade').value,
                cargo: document.getElementById('filtroCargo').value,
                partido: document.getElementById('filtroPartido').value
            };
            
            let candidaturasFiltradas = estadoSistema.candidaturas;
            
            if (filtros.estado) {
                candidaturasFiltradas = candidaturasFiltradas.filter(c => c.estado === filtros.estado);
                const estado = DADOS_SISTEMA.estados.find(e => e.nome === filtros.estado);
                if (estado) {
                    const selectCidade = document.getElementById('filtroCidade');
                    selectCidade.innerHTML = '<option value="">Todas as cidades</option>';
                    estado.cidades.forEach(cidade => {
                        const option = document.createElement('option');
                        option.value = cidade;
                        option.textContent = cidade;
                        if (filtros.cidade === cidade) option.selected = true;
                        selectCidade.appendChild(option);
                    });
                    selectCidade.disabled = false;
                }
            } else {
                document.getElementById('filtroCidade').innerHTML = '<option value="">Todas as cidades</option>';
                document.getElementById('filtroCidade').disabled = true;
            }
            
            if (filtros.cidade) {
                candidaturasFiltradas = candidaturasFiltradas.filter(c => c.cidade === filtros.cidade);
            }
            if (filtros.cargo) {
                candidaturasFiltradas = candidaturasFiltradas.filter(c => c.cargo === filtros.cargo);
            }
            if (filtros.partido) {
                candidaturasFiltradas = candidaturasFiltradas.filter(c => c.partido === filtros.partido);
            }
            
            candidaturasFiltradas.sort((a, b) => new Date(b.dataRegistro) - new Date(a.dataRegistro));
            
            if (candidaturasFiltradas.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td colspan="6" class="texto-centro" style="padding: 40px;">
                        <i class="fas fa-search" style="font-size: 24px; color: var(--silver); margin-bottom: 10px;"></i>
                        <div style="color: var(--silver);">Nenhuma candidatura encontrada</div>
                    </td>
                `;
                tbody.appendChild(tr);
                return;
            }
            
            candidaturasFiltradas.forEach(candidatura => {
                const tr = document.createElement('tr');
                
                let statusClass = "";
                let statusText = "";
                
                switch(candidatura.status) {
                    case "analise": statusClass = "status-analise"; statusText = "EM ANÁLISE"; break;
                    case "aprovado": statusClass = "status-aprovado"; statusText = "APROVADO"; break;
                    case "recusado": statusClass = "status-recusado"; statusText = "RECUSADO"; break;
                }
                
                tr.innerHTML = `
                    <td>
                        <strong>${candidatura.nome} ${candidatura.sobrenome}</strong><br>
                        <small>${candidatura.tiktok}</small>
                    </td>
                    <td>${candidatura.cargo}</td>
                    <td>${candidatura.partido}</td>
                    <td>${candidatura.estado}<br><small>${candidatura.cidade}</small></td>
                    <td><strong>${candidatura.numero}</strong></td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                `;
                
                tr.addEventListener('click', () => mostrarDetalhesCandidatura(candidatura.id));
                tr.style.cursor = "pointer";
                
                tbody.appendChild(tr);
            });
        }

        function mostrarDetalhesCandidatura(id) {
            const candidatura = estadoSistema.candidaturas.find(c => c.id === id);
            if (!candidatura) return;
            
            const modal = document.getElementById('modalDetalhes');
            const conteudo = document.getElementById('conteudoModalDetalhes');
            
            let partidoInfo = null;
            Object.values(DADOS_SISTEMA.partidos).flat().some(partido => {
                if (partido.sigla === candidatura.partido) {
                    partidoInfo = partido;
                    return true;
                }
                return false;
            });
            
            let detalhesHTML = `
                <div class="form-grid">
                    <div class="filtro-group">
                        <label class="filtro-label">Candidato:</label>
                        <div>${candidatura.nome} ${candidatura.sobrenome}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">TikTok:</label>
                        <div>${candidatura.tiktok}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Cargo:</label>
                        <div>${candidatura.cargo}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Local:</label>
                        <div>${candidatura.estado} / ${candidatura.cidade}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Partido:</label>
                        <div>${partidoInfo ? `${partidoInfo.sigla} - ${partidoInfo.nome}` : candidatura.partido}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Número:</label>
                        <div><strong>${candidatura.numero}</strong></div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Status:</label>
                        <div>
                            <span class="status-badge ${candidatura.status === 'analise' ? 'status-analise' : candidatura.status === 'aprovado' ? 'status-aprovado' : 'status-recusado'}">
                                ${candidatura.status === 'analise' ? 'EM ANÁLISE' : candidatura.status === 'aprovado' ? 'APROVADO' : 'RECUSADO'}
                            </span>
                        </div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Data de Registro:</label>
                        <div>${new Date(candidatura.dataRegistro).toLocaleDateString('pt-BR')}</div>
                    </div>
                </div>
            `;
            
            if (candidatura.vice) {
                detalhesHTML += `
                    <div class="mt-20">
                        <h4 class="filtro-label">Vice</h4>
                        <div class="form-grid">
                            <div class="filtro-group">
                                <label class="filtro-label">Nome:</label>
                                <div>${candidatura.vice.nome} ${candidatura.vice.sobrenome}</div>
                            </div>
                            <div class="filtro-group">
                                <label class="filtro-label">TikTok:</label>
                                <div>${candidatura.vice.tiktok || "Não informado"}</div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (candidatura.suplente) {
                detalhesHTML += `
                    <div class="mt-20">
                        <h4 class="filtro-label">Suplente</h4>
                        <div class="form-grid">
                            <div class="filtro-group">
                                <label class="filtro-label">Nome:</label>
                                <div>${candidatura.suplente.nome} ${candidatura.suplente.sobrenome}</div>
                            </div>
                            <div class="filtro-group">
                                <label class="filtro-label">TikTok:</label>
                                <div>${candidatura.suplente.tiktok || "Não informado"}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            if (candidatura.status === "recusado" && candidatura.motivoRecusa) {
                detalhesHTML += `
                    <div class="mt-20">
                        <h4 class="filtro-label">Motivo da Recusa</h4>
                        <div class="mensagem mensagem-erro">
                            <i class="fas fa-exclamation-circle"></i>
                            <div>${candidatura.motivoRecusa}</div>
                        </div>
                    </div>
                `;
            }
            
            conteudo.innerHTML = detalhesHTML;
            modal.classList.add('ativo');
        }

        // Autenticação
        function fazerLoginTSE() {
            const senha = document.getElementById('tseSenha').value;
            
            if (senha === DADOS_SISTEMA.tse.senha) {
                estadoSistema.usuarioAutenticado = true;
                estadoSistema.tipoUsuario = "tse";
                estadoSistema.usuarioInfo = {
                    nome: DADOS_SISTEMA.tse.presidente,
                    cargo: "PRESIDENTE DO TSE NACIONAL"
                };
                
                document.getElementById('usuarioNome').textContent = estadoSistema.usuarioInfo.nome;
                document.getElementById('usuarioCargo').textContent = estadoSistema.usuarioInfo.cargo;
                
                alert("🔓 ACESSO CONCEDIDO: TSE Nacional");
                navegarParaAba('dashboard');
            } else {
                alert("❌ ACESSO NEGADO: Senha incorreta");
            }
        }

        function fazerLoginTRE() {
            const estado = document.getElementById('treEstado').value;
            const cidade = document.getElementById('treCidade').value;
            const presidente = document.getElementById('trePresidente').value.trim();
            const senha = document.getElementById('treSenha').value;
            
            if (!estado || !cidade || !presidente || !senha) {
                alert("⚠️ Preencha todos os campos");
                return;
            }
            
            // Gerar senha baseada no padrão
            const nomeBase = presidente.toLowerCase().split(' ')[0];
            let sigla = "";
            
            // Encontrar a sigla correta baseada na cidade
            if (DADOS_SISTEMA.senhasTRE[estado] && DADOS_SISTEMA.senhasTRE[estado][cidade]) {
                sigla = DADOS_SISTEMA.senhasTRE[estado][cidade];
            } else {
                // Fallback: usar as duas primeiras letras da cidade
                sigla = cidade.substring(0, 2).toUpperCase();
            }
            
            const senhaEsperada = nomeBase + sigla;
            
            if (senha.toLowerCase() === senhaEsperada.toLowerCase()) {
                estadoSistema.usuarioAutenticado = true;
                estadoSistema.tipoUsuario = "tre";
                estadoSistema.usuarioInfo = {
                    nome: presidente,
                    cargo: `PRESIDENTE DO TRE ${cidade}`,
                    estado: estado,
                    cidade: cidade
                };
                
                document.getElementById('usuarioNome').textContent = estadoSistema.usuarioInfo.nome;
                document.getElementById('usuarioCargo').textContent = estadoSistema.usuarioInfo.cargo;
                
                alert(`🔓 ACESSO CONCEDIDO: TRE ${cidade}`);
                navegarParaAba('analise');
            } else {
                alert(`❌ ACESSO NEGADO: Senha incorreta. Padrão esperado: ${nomeBase}${sigla}`);
            }
        }

        // Gerenciamento TSE
        function alternarStatusEleicao() {
            estadoSistema.eleicaoAberta = !estadoSistema.eleicaoAberta;
            
            document.getElementById('statusEleicao').textContent = 
                estadoSistema.eleicaoAberta ? "SISTEMA ONLINE" : "SISTEMA OFFLINE";
            document.getElementById('btnAlternarEleicao').innerHTML = 
                estadoSistema.eleicaoAberta ? 
                '<i class="fas fa-power-off"></i> Desativar Sistema' : 
                '<i class="fas fa-power-off"></i> Ativar Sistema';
            
            if (estadoSistema.eleicaoAberta) {
                if (!estadoSistema.tipoEleicaoAtual) {
                    alert("⚠️ ATENÇÃO: Tipo de eleição não definido");
                } else {
                    alert("✅ SISTEMA ATIVADO: Registro de candidaturas liberado");
                }
            } else {
                alert("⏸️ SISTEMA PAUSADO: Registro de candidaturas bloqueado");
            }
            
            salvarDadosFirebase();
            salvarDadosLocalStorage();
        }

        // Análise de Candidaturas
        function atualizarTabelaAnalise() {
            const tbody = document.getElementById('tabelaAnalise');
            tbody.innerHTML = "";
            
            let candidaturasParaAnalise = estadoSistema.candidaturas;
            
            if (estadoSistema.tipoUsuario === 'tre' && estadoSistema.usuarioInfo) {
                const { estado, cidade } = estadoSistema.usuarioInfo;
                
                candidaturasParaAnalise = candidaturasParaAnalise.filter(candidatura => {
                    if (candidatura.estado !== estado) return false;
                    
                    const cargosMunicipais = ["Prefeito", "Vereador"];
                    const cargosEstaduais = ["Governador", "Senador", "Deputado Federal", "Deputado Estadual"];
                    const cargosNacionais = ["Presidente"];
                    
                    if (cargosMunicipais.includes(candidatura.cargo)) {
                        return candidatura.cidade === cidade;
                    } else if (cargosEstaduais.includes(candidatura.cargo)) {
                        return true;
                    } else if (cargosNacionais.includes(candidatura.cargo)) {
                        return true;
                    }
                    return false;
                });
            }
            
            candidaturasParaAnalise.sort((a, b) => {
                const ordemStatus = { "analise": 0, "aprovado": 1, "recusado": 2 };
                return ordemStatus[a.status] - ordemStatus[b.status];
            });
            
            if (candidaturasParaAnalise.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td colspan="6" class="texto-centro" style="padding: 40px;">
                        <i class="fas fa-clipboard-check" style="font-size: 24px; color: var(--silver); margin-bottom: 10px;"></i>
                        <div style="color: var(--silver);">Nenhuma candidatura para análise</div>
                    </td>
                `;
                tbody.appendChild(tr);
                return;
            }
            
            candidaturasParaAnalise.forEach(candidatura => {
                const tr = document.createElement('tr');
                
                let statusClass = "";
                let statusText = "";
                
                switch(candidatura.status) {
                    case "analise": statusClass = "status-analise"; statusText = "EM ANÁLISE"; break;
                    case "aprovado": statusClass = "status-aprovado"; statusText = "APROVADO"; break;
                    case "recusado": statusClass = "status-recusado"; statusText = "RECUSADO"; break;
                }
                
                tr.innerHTML = `
                    <td>
                        <strong>${candidatura.nome} ${candidatura.sobrenome}</strong><br>
                        <small>${candidatura.tiktok}</small>
                    </td>
                    <td>${candidatura.cargo}</td>
                    <td>${candidatura.partido}</td>
                    <td>${candidatura.estado}<br><small>${candidatura.cidade}</small></td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        ${candidatura.status === "analise" ? 
                            `<button class="btn btn-terciario btn-pequeno" onclick="abrirModalAnalise(${candidatura.id})">Analisar</button>` : 
                            `<button class="btn btn-secundario btn-pequeno" onclick="abrirModalAnalise(${candidatura.id})">Detalhes</button>`
                        }
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        function abrirModalAnalise(id) {
            const candidatura = estadoSistema.candidaturas.find(c => c.id === id);
            if (!candidatura) return;
            
            window.candidaturaEmAnalise = candidatura;
            
            const modal = document.getElementById('modalAnalise');
            const conteudo = document.getElementById('conteudoModalAnalise');
            
            let partidoInfo = null;
            Object.values(DADOS_SISTEMA.partidos).flat().some(partido => {
                if (partido.sigla === candidatura.partido) {
                    partidoInfo = partido;
                    return true;
                }
                return false;
            });
            
            let detalhesHTML = `
                <div class="form-grid">
                    <div class="filtro-group">
                        <label class="filtro-label">Candidato:</label>
                        <div>${candidatura.nome} ${candidatura.sobrenome}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Cargo:</label>
                        <div>${candidatura.cargo}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Local:</label>
                        <div>${candidatura.estado} / ${candidatura.cidade}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Partido:</label>
                        <div>${partidoInfo ? `${partidoInfo.sigla} - ${partidoInfo.nome}` : candidatura.partido}</div>
                    </div>
                    
                    <div class="filtro-group">
                        <label class="filtro-label">Número:</label>
                        <div><strong>${candidatura.numero}</strong></div>
                    </div>
                </div>
            `;
            
            if (candidatura.vice) {
                detalhesHTML += `
                    <div class="mt-10">
                        <h4 class="filtro-label">Vice:</h4>
                        <div>${candidatura.vice.nome} ${candidatura.vice.sobrenome}</div>
                    </div>
                `;
            } else if (candidatura.suplente) {
                detalhesHTML += `
                    <div class="mt-10">
                        <h4 class="filtro-label">Suplente:</h4>
                        <div>${candidatura.suplente.nome} ${candidatura.suplente.sobrenome}</div>
                    </div>
                `;
            }
            
            conteudo.innerHTML = detalhesHTML;
            
            if (candidatura.status === "analise") {
                document.getElementById('btnAprovarCandidatura').disabled = false;
                document.getElementById('btnRecusarCandidatura').disabled = false;
                document.getElementById('motivoRecusa').disabled = false;
                document.getElementById('motivoRecusa').value = "";
            } else {
                document.getElementById('btnAprovarCandidatura').disabled = true;
                document.getElementById('btnRecusarCandidatura').disabled = true;
                document.getElementById('motivoRecusa').disabled = true;
                
                if (candidatura.status === "recusado" && candidatura.motivoRecusa) {
                    document.getElementById('motivoRecusa').value = candidatura.motivoRecusa;
                }
            }
            
            modal.classList.add('ativo');
        }

        async function aprovarCandidatura() {
            if (!window.candidaturaEmAnalise) return;
            
            const candidatura = window.candidaturaEmAnalise;
            const index = estadoSistema.candidaturas.findIndex(c => c.id === candidatura.id);
            
            if (index !== -1) {
                estadoSistema.candidaturas[index].status = "aprovado";
                estadoSistema.candidaturas[index].motivoRecusa = "";
                
                await salvarDadosFirebase();
                salvarDadosLocalStorage();
                
                atualizarDashboard();
                atualizarTabelaCandidatos();
                atualizarTabelaAnalise();
                
                document.getElementById('modalAnalise').classList.remove('ativo');
                alert("✅ Candidatura APROVADA com sucesso!");
            }
        }

        async function recusarCandidatura() {
            if (!window.candidaturaEmAnalise) return;
            
            const motivo = document.getElementById('motivoRecusa').value.trim();
            
            if (!motivo) {
                alert("⚠️ Informe o motivo da recusa");
                return;
            }
            
            const candidatura = window.candidaturaEmAnalise;
            const index = estadoSistema.candidaturas.findIndex(c => c.id === candidatura.id);
            
            if (index !== -1) {
                estadoSistema.candidaturas[index].status = "recusado";
                estadoSistema.candidaturas[index].motivoRecusa = motivo;
                
                await salvarDadosFirebase();
                salvarDadosLocalStorage();
                
                atualizarDashboard();
                atualizarTabelaCandidatos();
                atualizarTabelaAnalise();
                
                document.getElementById('modalAnalise').classList.remove('ativo');
                alert("❌ Candidatura RECUSADA com sucesso!");
            }
        }

        // Tabela de Partidos
        function preencherTabelaPartidos() {
            const tbody = document.getElementById('tabelaPartidos');
            tbody.innerHTML = "";
            
            const todosPartidos = [
                ...DADOS_SISTEMA.partidos.direita.map(p => ({...p, ideologia: "Direita"})),
                ...DADOS_SISTEMA.partidos.centro.map(p => ({...p, ideologia: "Centro"})),
                ...DADOS_SISTEMA.partidos.esquerda.map(p => ({...p, ideologia: "Esquerda"}))
            ];
            
            todosPartidos.sort((a, b) => a.numero - b.numero);
            
            todosPartidos.forEach(partido => {
                const tr = document.createElement('tr');
                
                let corIdeologia = "";
                switch(partido.ideologia) {
                    case "Direita": corIdeologia = "var(--warning-red)"; break;
                    case "Centro": corIdeologia = "var(--gold)"; break;
                    case "Esquerda": corIdeologia = "var(--electric-blue)"; break;
                }
                
                tr.innerHTML = `
                    <td><strong>${partido.sigla}</strong></td>
                    <td><strong>${partido.numero}</strong></td>
                    <td>${partido.nome}</td>
                    <td>
                        <span class="status-badge" style="background: ${corIdeologia}; color: white;">
                            ${partido.ideologia}
                        </span>
                    </td>
                    <td>${partido.numero >= 80 ? "Fictício" : "Oficial"}</td>
                `;
                
                tbody.appendChild(tr);
            });
            
            document.getElementById('totalPartidos').textContent = todosPartidos.length;
        }

        // Expor funções globais
        window.abrirModalAnalise = abrirModalAnalise;
    </script>
</body>
    </html>
